# 虹靈御所｜八字人生兵法 v1.6

Modular BaZi (八字) analysis tool with narrative output, Five Element weighting, refined categorized ShenSha, and PDF export.

## 版本演進
| 版本 | 型態 | 特色 |
|------|------|------|
| v1.4 | 單一 HTML 檔 | 基礎四柱 + 十神 + 部分神煞 + 故事敘事 + PDF | 
| v1.6 | 模組化 (index + js/*) | 五行力量分析、神煞分類與來源、PDF 增強、即時干支驗證、自動推時支 |

## 功能摘要 (v1.6)
- 四柱輸入：年/月/日柱由外部萬年曆取得；時柱支持自動推斷。
- 子時劃日策略：00:00 換日 / 23:00 夜子換日提示。
- 五行力量：天干=1, 納音=0.5 → 統計旺/平/弱。
- 十神：相對日主天干即時計算。
- 神煞（教學精簡版）：分類顯示（貴人 / 吉星 / 桃花 / 動星 / 陰煞 / 刑煞）並標明來源柱。
- 故事敘事：每軍團（年=家族、月=成長、日=本我、時=未來）生成語意描述。
- PDF 匯出：含時間戳、五行分佈、神煞分類、敘事、免責。
- 即時干支驗證：輸入框顏色提示（綠=合法，紅=格式錯）。
- 自動推時支：留空時支但輸入出生時間時，計算自動填入。

## 使用方式
1. 取得年/月/日干支（外部萬年曆 / 排盤工具）。
2. 輸入姓名（可選）、出生日期時間（可選但影響自動時支提示）。
3. 填入年/月/日柱干支；若不確定格式會即時標紅。
4. 選擇或讓系統推斷時支 → 點「計算」。
5. 查看五行、十神、神煞分類與敘事；需要分享用 PDF → 點「下載 PDF」。

## 設計說明
- 模組拆分：data.js（靜態表/規則）、logic.js（計算核心）、ui.js（交互與渲染）。
- 五行計算：目前僅計入 4 天干 + 4 納音權重，不含藏干 / 季節調整。
- 神煞：採教學子集；返回來源柱陣列以利 PDF 與敘述引用。

## 未來 Roadmap（摘要）
- 地支藏干與季節強弱加權
- 大運 / 流年推算與疊加面板
- 神煞全集開關（教學 / 完整）
- i18n (中文 / 英文) 切換
- 更細緻 PDF 排版（多欄 / 圖示）
- 測試自動化（核心計算 diff）

## 貢獻
PR / issue 歡迎：
1. 先查看已有 PR (#4 v1.6) 與修正 PR (#7)。
2. 建議在新功能前開 issue 討論權重或規則來源。

## 授權 & 第三方
- jsPDF (MIT) via CDN
- 資料表為手工整理（教學使用，不保證完整性）

---
© 虹靈御所 Hong Ling Sanctuary