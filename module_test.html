<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Module Test</title>
</head>
<body>
    <h1>Testing BaZi v1.6 Modules</h1>
    <div id="test-results"></div>
    <script type="module">
        import { Stems, Branches, ShenShaRules } from './js/data.js';
        import { parseGZ, hourToBranch, tenGod, computeFiveElementStrength } from './js/logic.js';
        
        const results = document.getElementById('test-results');
        
        function test(desc, assertion) {
            const pass = assertion();
            results.innerHTML += `<div style="color: ${pass ? 'green' : 'red'}">${desc}: ${pass ? 'PASS' : 'FAIL'}</div>`;
        }
        
        // Test data import
        test('Stems import', () => Stems.length === 10);
        test('Branches import', () => Branches.length === 12);
        test('ShenSha rules import', () => ShenShaRules.length > 0);
        
        // Test logic functions
        test('parseGZ function', () => parseGZ('甲子') === '甲子');
        test('hourToBranch function', () => hourToBranch(23) === '子');
        test('tenGod function', () => tenGod('甲', '甲') === '比肩');
        
        // Test Five Element computation
        const testPillars = {Y:'甲子', M:'丙寅', D:'戊辰', H:'庚午'};
        const testNayin = {Y:'海中金', M:'爐中火', D:'大林木', H:'路旁土'};
        const fe = computeFiveElementStrength(testPillars, testNayin);
        test('Five Element strength computation', () => fe.total === 6.0);
        
        results.innerHTML += '<div style="color: blue; margin-top: 20px;">All critical module functions are working!</div>';
    </script>
</body>
</html>