<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>è™¹éˆå¾¡æ‰€ï½œå…«å­—äººç”Ÿå…µæ³• v1.6 (Enhanced)</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net"/>
<style>
:root { --bg:#0f1115; --card:#171a21; --text:#e6e9ef; --muted:#a6adbb; --acc:#6bc4ff; --border:#222; --danger:#e53935; --ok:#4caf50; --warn:#ffb300; --el-é‡‘:#b0c4de; --el-æœ¨:#6fbf73; --el-æ°´:#42a5f5; --el-ç«:#ff7043; --el-åœŸ:#c4a676; }
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto}
a{color:#8ad0ff}
.hdr{padding:20px 16px;border-bottom:1px solid var(--border)}
.hdr h1{margin:0 0 6px;font-size:22px}
.hdr .sub{margin:0;color:var(--muted);font-size:14px}
.wrap{max-width:1180px;margin:24px auto;padding:0 16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;margin:16px 0;box-shadow:0 2px 10px rgba(0,0,0,.25)}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
.grid-3{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px}
.grid input,.grid select,.grid-3 input,.grid-3 select{width:100%;padding:10px;border-radius:10px;border:1px solid #2a2f3a;background:#0e1015;color:var(--text);transition:border-color .25s, box-shadow .25s}
.grid input.valid{border-color:var(--ok);box-shadow:0 0 0 1px var(--ok) inset}
.grid input.invalid{border-color:var(--danger);box-shadow:0 0 0 1px var(--danger) inset}
.btn{padding:10px 14px;border-radius:10px;background:var(--acc);border:0;font-weight:600;cursor:pointer}
.actions{display:flex;gap:10px;flex-wrap:wrap}
.small{font-size:12px;color:var(--muted)}
.report{width:100%;border-collapse:collapse;margin-top:8px}
.report th,.report td{border:1px solid #2a2f3a;padding:10px;vertical-align:top}
.report th{background:#0e1015;color:#cfd6e6}
.pill{display:inline-block;background:#10131a;border:1px solid #2a2f3a;border-radius:999px;padding:.15rem .6rem;margin:0 6px 6px 0;font-size:12px}
.section-title{margin:.65rem 0 .35rem;color:var(--muted);font-size:13px;letter-spacing:.5px}
.story{white-space:pre-wrap;font-size:14px;line-height:1.5}
.badge{display:inline-block;padding:4px 8px;border-radius:8px;background:#1e2430;border:1px solid #2a2f3a;color:#a0d3ff;margin-right:6px;font-size:12px}
.footer{padding:24px 16px;color:var(--muted);text-align:center;font-size:12px}
.flex{display:flex;flex-wrap:wrap;gap:6px}
.el-tag{padding:4px 8px;border-radius:8px;font-size:12px;background:#20252e;border:1px solid #2a2f3a}
.el-é‡‘{background:var(--el-é‡‘);color:#142030} .el-æœ¨{background:var(--el-æœ¨);color:#102016}
.el-æ°´{background:var(--el-æ°´);color:#0e2234} .el-ç«{background:var(--el-ç«);color:#2d1008}
.el-åœŸ{background:var(--el-åœŸ);color:#22160a}
.hl-strong{outline:2px solid #ffd54f}
.cat-label{font-size:11px;padding:2px 6px;border-radius:6px;background:#253040;color:#9ecbff;margin-right:4px;display:inline-block}
.cat-è²´äºº{background:#2d3f52}
.cat-å‰æ˜Ÿ{background:#314d39}
.cat-æ¡ƒèŠ±{background:#4d2f4d}
.cat-å‹•æ˜Ÿ{background:#3d3a23}
.cat-é™°ç…{background:#46342c}
.cat-åˆ‘ç…{background:#4b2d2d}
.fade{opacity:.7}
.note{font-size:11px;color:#8892a2;margin-top:6px}
@media (max-width:900px){.grid-3,.grid{grid-template-columns:1fr}}
</style>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>
<header class="hdr">
  <h1>è™¹éˆå¾¡æ‰€ï½œå…«å­—äººç”Ÿå…µæ³• v1.6</h1>
  <p class="sub">é‡æ§‹ + äº”è¡ŒåŠ›é‡ + ç¥ç…ç²¾ç·»åŒ– + PDF å¢å¼· + æ•…äº‹ç´°åŒ– + è‡ªå‹•æ¨æ™‚æ”¯ + å³æ™‚é©—è­‰ã€‚</p>
</header>
<main class="wrap">
  <section class="card">
    <h2>ğŸ‘¤ åŸºæœ¬è³‡æ–™</h2>
    <div class="grid-3">
      <label>å§“å <input id="name" placeholder="ä¾‹ï¼šç‹å°æ˜"></label>
      <label>å‡ºç”Ÿæ—¥æœŸ <input id="birthDate" type="date"></label>
      <label>å‡ºç”Ÿæ™‚é–“ <input id="birthTime" type="time" step="60"></label>
    </div>
    <div class="grid">
      <label>æ™‚å€
        <select id="tz">
          <option value="UTC+08:00" selected>UTC+08:00ï¼ˆå°ç£/é¦™æ¸¯/æ–°åŠ å¡ï¼‰</option>
          <option value="UTC+09:00">UTC+09:00ï¼ˆæ—¥æœ¬/é¦–çˆ¾ï¼‰</option>
          <option value="UTC+07:00">UTC+07:00ï¼ˆæ±å—äºéƒ¨åˆ†ï¼‰</option>
          <option value="UTC+00:00">UTC+00:00ï¼ˆå€«æ•¦ï¼‰</option>
          <option value="UTC-05:00">UTC-05:00ï¼ˆç´ç´„ï¼‰</option>
          <option value="UTC-08:00">UTC-08:00ï¼ˆæ´›æ‰ç£¯ï¼‰</option>
        </select>
      </label>
      <label>å­æ™‚åŠƒæ—¥æ³•
        <select id="ziCut">
          <option value="midnight" selected>å­åˆä¸æ›æ—¥ï¼ˆ00:00 æ›æ—¥ï¼‰</option>
          <option value="23cut">å¤œå­æ›æ—¥ï¼ˆ23:00 æ›æ—¥ï¼‰</option>
        </select>
      </label>
      <label>å¹´æŸ±å¹²æ”¯ <input id="gzY" placeholder="ä¾‹ï¼šç”²å­" maxlength="2"></label>
      <label>æœˆæŸ±å¹²æ”¯ <input id="gzM" placeholder="ä¾‹ï¼šä¸™å¯…" maxlength="2"></label>
      <label>æ—¥æŸ±å¹²æ”¯ <input id="gzD" placeholder="ä¾‹ï¼šè¾›å¯" maxlength="2"></label>
      <label>æ™‚æ”¯
        <select id="hourBranch">
          <option value="">ï¼ˆè‡ªå‹•æ¨æˆ–é¸ï¼‰</option>
          <option value="å­">å­ï¼ˆ23:00â€“00:59ï¼‰</option><option value="ä¸‘">ä¸‘ï¼ˆ01:00â€“02:59ï¼‰</option>
          <option value="å¯…">å¯…</option><option value="å¯">å¯</option><option value="è¾°">è¾°</option><option value="å·³">å·³</option>
          <option value="åˆ">åˆ</option><option value="æœª">æœª</option><option value="ç”³">ç”³</option><option value="é…‰">é…‰</option>
          <option value="æˆŒ">æˆŒ</option><option value="äº¥">äº¥</option>
        </select>
      </label>
    </div>
    <div class="actions">
      <button class="btn" id="btnOpenCal" type="button">é–‹è¬å¹´æ›†</button>
      <button class="btn" id="btnGuessHB" type="button">æ¨æ™‚æ”¯</button>
      <button class="btn" id="btnPaste" type="button">è²¼ä¸Šä¸‰æŸ±</button>
      <button class="btn" id="btnCalc" type="button">è¨ˆç®—</button>
      <button class="btn" id="btnPdf" type="button">ä¸‹è¼‰ PDF</button>
    </div>
    <div class="small">å¹´/æœˆ/æ—¥æŸ±è«‹ä»¥è¬å¹´æ›†ç‚ºæº–ï¼›å³æ™‚é©—è­‰ï¼šç¶ =åˆæ³•å¹²æ”¯ï¼Œç´…=æ ¼å¼éŒ¯èª¤ï¼›æœªé¸æ™‚æ”¯ä½†å¡«æ™‚é–“æœƒè‡ªå‹•æ¨æ–·ã€‚</div>
  </section>
  <section class="card">
    <h2>ğŸ“„ å ±å‘Šï¼ˆå››æ™‚è»åœ˜ Ã— åç¥ Ã— ç´éŸ³ Ã— äº”è¡Œ Ã— ç¥ç…åˆ†é¡ï¼‰</h2>
    <div id="fiveElPanel" style="display:none;margin-bottom:12px">
      <div class="section-title">äº”è¡ŒåŠ›é‡ï¼ˆå¤©å¹²=1, ç´éŸ³=0.5ï¼‰</div>
      <div id="fiveElTags" class="flex"></div>
      <div id="fiveElComment" class="note"></div>
    </div>
    <table class="report" id="report" style="display:none">
      <thead>
        <tr><th style="width:120px">è»åœ˜</th><th>ç¶œåˆæ¬„</th></tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </section>
  <section class="card">
    <h2>âš™ï¸ æª¢æŸ¥ / Debug</h2>
    <div id="debug"></div>
  </section>
</main>
<footer class="footer">Â© è™¹éˆå¾¡æ‰€ Hong Ling Sanctuary â€” v1.6 Enhanced</footer>
<script type="module" src="./js/ui.js"></script>
</body>
</html>